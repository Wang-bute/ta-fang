<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥¹æ–¹é…’å§æ™ºèƒ½ä½“éªŒç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f9f0ff 0%, #f5e6ff 100%);
            color: #4a2c5f;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(156, 39, 176, 0.1);
            border-left: 5px solid #9c27b0;
        }
        
        h1 {
            background: linear-gradient(90deg, #8e24aa, #e91e63);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.8rem;
            margin-bottom: 10px;
        }
        
        .tagline {
            color: #7b1fa2;
            font-size: 1.2rem;
            font-style: italic;
        }
        
        section {
            background: #fff;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(156, 39, 176, 0.1);
            border-left: 5px solid #9c27b0;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        section:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(156, 39, 176, 0.15);
        }
        
        h2 {
            color: #7b1fa2;
            border-bottom: 2px solid #e1bee7;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #6a1b9a;
            font-weight: 600;
        }
        
        .required::after {
            content: " *";
            color: #e91e63;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #ce93d8;
            background-color: #fce4ec;
            color: #4a148c;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #9c27b0;
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.2);
            background-color: #fff;
        }
        
        .emergency-contacts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .sober-soup-section {
            text-align: center;
        }
        
        .sober-soup-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin: 25px 0;
        }
        
        .soup-option {
            width: 200px;
            padding: 20px;
            border-radius: 12px;
            background: #f8f5fa;
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .soup-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(156, 39, 176, 0.2);
        }
        
        .soup-option.selected {
            border-color: #9c27b0;
            background: #f3e5f5;
        }
        
        .soup-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #9c27b0;
        }
        
        .soup-name {
            font-weight: bold;
            color: #6a1b9a;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .soup-desc {
            font-size: 0.9rem;
            color: #7e57c2;
            margin-bottom: 10px;
        }
        
        .soup-benefits {
            font-size: 0.85rem;
            color: #9575cd;
            font-style: italic;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #8e24aa, #e91e63);
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(156, 39, 176, 0.3);
        }
        
        button:hover {
            background: linear-gradient(135deg, #7b1fa2, #c2185b);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(156, 39, 176, 0.4);
        }
        
        .environment-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .environment-buttons button {
            flex: 1;
            min-width: 160px;
            background: linear-gradient(135deg, #ab47bc, #e91e63);
        }
        
        #environment-details {
            margin-top: 20px;
            padding: 15px;
            background: #f8f5fa;
            border-radius: 8px;
            border-left: 4px solid #ba68c8;
        }
        
        .menu-section {
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            background: #fafafa;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .item {
            border-bottom: 1px solid #e1bee7;
            padding: 12px 0;
            display: flex;
            align-items: center;
        }
        
        .item:hover {
            background-color: #f3e5f5;
            border-radius: 6px;
            padding-left: 10px;
        }
        
        .item label {
            margin: 0;
            margin-left: 10px;
            cursor: pointer;
            flex: 1;
        }
        
        input[type="checkbox"] {
            accent-color: #9c27b0;
            transform: scale(1.2);
            width: auto;
            margin-right: 10px;
        }
        
        .service-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .final-submit {
            text-align: center;
            margin: 30px 0;
        }
        
        .final-submit button {
            padding: 15px 40px;
            font-size: 1.2rem;
        }
        
        #data-display {
            background-color: #f8f5fa;
            border: 2px dashed #ba68c8;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            display: none;
        }
        
        #submitted-data {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            white-space: pre-wrap;
            border: 1px solid #e1bee7;
            font-family: monospace;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: linear-gradient(135deg, #8e24aa, #e91e63);
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .emergency-contacts {
                grid-template-columns: 1fr;
            }
            
            .environment-buttons {
                flex-direction: column;
            }
            
            .sober-soup-options {
                flex-direction: column;
                align-items: center;
            }
            
            .service-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>å¥¹æ–¹é…’å§æ™ºèƒ½ä½“éªŒç³»ç»Ÿ</h1>
            <p class="tagline">ä¸“å±å¥³æ€§çš„æ¸©é¦¨ç©ºé—´ï¼Œäº«å—å¾®é†ºæ—¶å…‰</p>
        </header>
        
        <div class="notification" id="notification"></div>
        
        <!-- ç”¨æˆ·ä¿¡æ¯ç™»è®° -->
        <section id="user-info">
            <h2>ç”¨æˆ·ä¿¡æ¯ç™»è®°</h2>
            <div class="form-group">
                <label class="required">å§“åï¼š</label>
                <input type="text" id="userName" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" required>
            </div>
            
            <div class="form-group">
                <label class="required">æ€§åˆ«ï¼š</label>
                <select id="gender" required>
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="female">å¥³æ€§</option>
                    <option value="male">ç”·æ€§</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="required">æ‰‹æœºå·ç ï¼š</label>
                <input type="tel" id="phone" placeholder="è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·ç " required>
            </div>
            
            <div class="form-group">
                <label class="required">å–œå¥½ç¯å¢ƒï¼š</label>
                <select id="environment-type" required>
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="heavy">é‡åº¦çƒ­é—¹</option>
                    <option value="moderate">ä¸­åº¦çƒ­é—¹</option>
                    <option value="light">è½»åº¦çƒ­é—¹</option>
                    <option value="quiet">æ¸…å§</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="required">èƒ½æ¥å—é…’ç²¾ç¨‹åº¦ï¼š</label>
                <select id="alcohol-level" required>
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="micro">å¾®é†ºä¸‰åº¦åˆ°åäºŒåº¦</option>
                    <option value="moderate">ä¸­åº¦åäºŒåº¦åˆ°äºŒååº¦</option>
                    <option value="heavy">é‡åº¦äºŒååº¦åˆ°å››åäº”åº¦</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="required">æ˜¯å¦æœ‰é…’ç²¾è¿‡æ•å²ï¼š</label>
                <select id="allergy" required>
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="yes">æœ‰</option>
                    <option value="no">æ— </option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="required">ç›®çš„ï¼š</label>
                <select id="purpose" required>
                    <option value="">è¯·é€‰æ‹©</option>
                    <option value="personal">ä¸ªäººå°é…Œ</option>
                    <option value="group">æœ‹å‹èšä¼š</option>
                    <option value="date">çº¦ä¼š</option>
                    <option value="business">å•†åŠ¡æ´½è°ˆ</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="required">ç´§æ€¥è”ç³»äººä¿¡æ¯ï¼š</label>
                <div class="emergency-contacts">
                    <div>
                        <input type="text" id="emergency1" placeholder="è”ç³»äºº1å§“å" required>
                        <input type="tel" id="emergencyPhone1" placeholder="è”ç³»äºº1ç”µè¯" required>
                    </div>
                    <div>
                        <input type="text" id="emergency2" placeholder="è”ç³»äºº2å§“å">
                        <input type="tel" id="emergencyPhone2" placeholder="è”ç³»äºº2ç”µè¯">
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label><input type="checkbox" id="changeRoom"> éœ€è¦ä¸´æ—¶è¡£ç‰©æ›´æ¢é—´</label>
                <label><input type="checkbox" id="accommodation"> éœ€è¦æä¾›ä½å®¿</label>
                <label><input type="checkbox" id="transport"> éœ€è¦å‡ºè¡ŒæœåŠ¡</label>
            </div>
        </section>
        
        <!-- é†’é…’æ±¤é€‰æ‹© -->
        <section class="sober-soup-section">
            <h2>é€‰æ‹©é†’é…’æ±¤</h2>
            <p>æˆ‘ä»¬æä¾›ä¸‰ç§ç²¾é€‰é†’é…’æ±¤ï¼Œå¸®åŠ©æ‚¨ç¼“è§£é…’åä¸é€‚</p>
            
            <div class="sober-soup-options">
                <div class="soup-option" onclick="selectSoberSoup('tomato')">
                    <div class="soup-icon">ğŸ…</div>
                    <div class="soup-name">ç•ªèŒ„æ±</div>
                    <div class="soup-desc">å¯Œå«ç»´ç”Ÿç´ Cï¼Œç¼“è§£é…’åä¸é€‚</div>
                    <div class="soup-benefits">å¯Œå«ç•ªèŒ„çº¢ç´ ï¼Œå¸®åŠ©é…’ç²¾ä»£è°¢</div>
                </div>
                
                <div class="soup-option" onclick="selectSoberSoup('rice')">
                    <div class="soup-icon">ğŸš</div>
                    <div class="soup-name">ç±³æ±¤</div>
                    <div class="soup-desc">æ¸©å’Œå…»èƒƒï¼Œç¼“è§£èƒƒéƒ¨ä¸é€‚</div>
                    <div class="soup-benefits">æ˜“æ¶ˆåŒ–ï¼Œä¿æŠ¤èƒƒé»è†œ</div>
                </div>
                
                <div class="soup-option" onclick="selectSoberSoup('mungbean')">
                    <div class="soup-icon">ğŸ¥£</div>
                    <div class="soup-name">ç»¿è±†æ±¤</div>
                    <div class="soup-desc">æ¸…çƒ­è§£æ¯’ï¼Œå¸®åŠ©é…’ç²¾ä»£è°¢</div>
                    <div class="soup-benefits">åˆ©å°¿è§£æ¯’ï¼Œç¼“è§£å¤´ç—›</div>
                </div>
            </div>
            
            <button onclick="bookCongee()">é¢„çº¦é†’é…’æ±¤</button>
        </section>
        
        <!-- ç¯å¢ƒé€‰æ‹© -->
        <section id="environment-selection">
            <h2>é€‰æ‹©ç¯å¢ƒ</h2>
            <div class="environment-buttons">
                <button onclick="selectEnvironment('heavy')">é‡åº¦çƒ­é—¹</button>
                <button onclick="selectEnvironment('moderate')">ä¸­åº¦çƒ­é—¹</button>
                <button onclick="selectEnvironment('light')">è½»åº¦çƒ­é—¹</button>
                <button onclick="selectEnvironment('quiet')">æ¸…å§</button>
            </div>
            
            <div id="environment-details"></div>
        </section>
        
        <!-- é¥®å“é€‰æ‹© -->
        <section id="drinks-selection">
            <h2>é€‰æ‹©é¥®å“</h2>
            <div>
                <h3>å¥¶èŒ¶ç³»åˆ— (10.9å…ƒ/æ¯)</h3>
                <div class="menu-section" id="milk-tea-list"></div>
                
                <h3>å†·é¥® (9.9å…ƒ/æ¯)</h3>
                <div class="menu-section" id="cold-drinks-list"></div>
                
                <h3>å¾®é†ºé¥®å“ (12.9å…ƒ/æ¯)</h3>
                <div class="menu-section" id="mild-intoxication-list"></div>
                
                <h3>ä¸­åº¦é…’ç²¾ (14.9å…ƒ/æ¯)</h3>
                <div class="menu-section" id="medium-alcohol-list"></div>
                
                <h3>é‡åº¦é…’ç²¾ (25å…ƒ/æ¯)</h3>
                <div class="menu-section" id="heavy-alcohol-list"></div>
                
                <div style="text-align:center; margin-top:20px;">
                    <button onclick="submitOrder()">æäº¤é¥®å“è®¢å•</button>
                </div>
            </div>
        </section>
        
        <!-- é£Ÿå“æ¨è -->
        <section id="food-selection">
            <h2>é£Ÿå“æ¨è</h2>
            <div>
                <h3>é…¥è„†ç‚¸ç‰©ç±»</h3>
                <div class="menu-section" id="crispy-foods"></div>
                
                <h3>è‚‰é¦™å¤å‘³ç±»</h3>
                <div class="menu-section" id="meat-foods"></div>
                
                <h3>æµ·é²œå°é£Ÿç±»</h3>
                <div class="menu-section" id="seafood-foods"></div>
                
                <h3>èŠå£«/ç¢³æ°´ç±»</h3>
                <div class="menu-section" id="cheese-starchy"></div>
                
                <h3>å‡‰æ‹Œ/æ¸…çˆ½ç±»</h3>
                <div class="menu-section" id="cold-refresh"></div>
                
                <h3>åˆ›æ„å°é£Ÿç±»</h3>
                <div class="menu-section" id="creative-snacks"></div>
                
                <div style="text-align:center; margin-top:20px;">
                    <button onclick="submitFoodOrder()">æäº¤é£Ÿå“è®¢å•</button>
                </div>
            </div>
        </section>
        
        <!-- é¢å¤–æœåŠ¡ -->
        <section id="additional-services">
            <h2>é¢å¤–æœåŠ¡</h2>
            <div class="service-buttons">
                <button onclick="bookService('sanitary')">å¥³æ€§å«ç”Ÿå·¾ï¼ˆå…è´¹ï¼‰</button>
                <button onclick="bookService('changeRoom')">é¢„çº¦æ›´æ¢è¡£ç‰©é—´</button>
                <button onclick="bookService('accommodation')">é¢„çº¦ä½å®¿</button>
                <button onclick="bookService('transport')">é¢„çº¦å‡ºè¡Œ</button>
            </div>
        </section>
        
        <!-- æäº¤æŒ‰é’® -->
        <div class="final-submit">
            <button id="final-submit" onclick="finalSubmit()">æäº¤å…¨éƒ¨ä¿¡æ¯</button>
        </div>
        
        <!-- æ•°æ®å±•ç¤ºåŒºåŸŸ -->
        <section id="data-display">
            <h2>æ‚¨æäº¤çš„æ•°æ®</h2>
            <pre id="submitted-data">æ•°æ®å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</pre>
            <div style="text-align:center; margin-top:20px;">
                <button onclick="downloadData()">ä¸‹è½½æ•°æ®</button>
                <button onclick="clearData()" style="background:linear-gradient(135deg, #f44336, #d32f2f);">æ¸…é™¤æ•°æ®</button>
            </div>
        </section>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        const milkTeaItems = [
            {name:'æ¡‚è¯­æš–é¦™',price:10.9},
            {name:'èŠ‹æ³¥ç»µäº‘å¥¶éœœ',price:10.9},
            {name:'å§œæ’å¥¶éº»è–¯',price:10.9},
            {name:'çº¢è±†é…’é…¿åœ†å­',price:10.9},
            {name:'æ —é¦™æ —ç»’å¥¶ç»¿',price:10.9},
            {name:'ç«ç‘°èŠ‹åœ†é†‡ä¹³',price:10.9},
            {name:'ç„¦ç³–çƒ¤å¥¶å¸ƒä¸',price:10.9},
            {name:'çº¢æ£æ¡‚åœ†å¥¶é†‡',price:10.9},
            {name:'æŠ¹èŒ¶çº¢è±†æš–èŠ‹',price:10.9},
            {name:'ä¹Œé¾™å¥¶å†»çƒ§',price:10.9},
            {name:'æ¦›æœå¯å¯å¥¶å’–',price:10.9},
            {name:'é™ˆçš®çº¢è±†é²œå¥¶',price:10.9},
            {name:'ç‡•éº¦æ —æ³¥å¥¶èŒ¶',price:10.9},
            {name:'èŒ‰è‰å¥¶ç»¿éº»è–¯',price:10.9},
            {name:'çº¢ç³–å§œæ±æ’å¥¶',price:10.9},
        ];

        const coldDrinksItems = [
            {name:'é’ææ°”æ³¡å¥¶ç»¿',price:9.9},
            {name:'è¥¿ç“œå•µå•µå†°èŒ¶',price:9.9},
            {name:'è‘¡è„èŠå£«å¥¶ç›–',price:9.9},
            {name:'è”æç«ç‘°å†°ä¹³',price:9.9},
            {name:'èŠ’æœç³¯ç±³é¥­å¥¶èŒ¶',price:9.9},
            {name:'æŸ æª¬æµ·ç›å¥¶ç»¿',price:9.9},
            {name:'è“è“é…¸å¥¶å†°æ²™',price:9.9},
            {name:'æ¡ƒå­ä¹Œé¾™é›ªé¡¶',price:9.9},
            {name:'ç™¾é¦™æœåŒå“ç‚®',price:9.9},
            {name:'èŠ‹åœ†è‘¡è„å†°',price:9.9},
            {name:'è–„è·å·§å…‹åŠ›å¥¶å†°',price:9.9},
            {name:'å‡¤æ¢¨æ¤°æ¤°å†°èŒ¶',price:9.9},
            {name:'è‰è“å¥¶å†»æ’å†°',price:9.9},
            {name:'è¥¿æŸšèŒ‰è‰å†·æ³¡',price:9.9},
            {name:'å¥¥åˆ©å¥¥ç¢å†°å¥¶èŒ¶',price:9.9},
        ];

        const mildDrinksItems = [
            {name:'æŠ¹èŒ¶äº‘æ –',price:12.9},
            {name:'é’å²šæŠ¹é›ª',price:12.9},
            {name:'æŠ¹èŒ¶æ —ç»’å¾®é†º',price:12.9},
            {name:'ç«¹å½±æŠ¹é¦™',price:12.9},
            {name:'æŠ¹èŒ¶è“æœé…¿',price:12.9},
            {name:'æ¡ƒé›¾è½»é…Œ',price:12.9},
            {name:'é’ææœˆå…‰é…’',price:12.9},
            {name:'æŸ‘æ©˜æ™šé£é…¿',price:12.9},
            {name:'è”æç¢å†°é¥®',price:12.9},
            {name:'è‘¡è„æ¢¦å¢ƒå¾®é†º',price:12.9},
            {name:'è¥¿æŸšèŒ‰è‰å†·é…¿',price:12.9},
            {name:'è“æœæ˜Ÿè½é…’',price:12.9}
        ];

        const mediumDrinksItems = [
            {name:'ç„¦ç³–å¨å£«å¿Œå¥¶å’–',price:14.9},
            {name:'é»‘åŠ ä»‘ç™½å…°åœ°',price:14.9},
            {name:'æŠ¹èŒ¶æœ—å§†é†‡é…¿',price:14.9},
            {name:'è“æœé‡‘é…’æ°”æ³¡',price:14.9},
            {name:'èœ‚èœœè‚‰æ¡‚æœ—å§†',price:14.9},
            {name:'è¥¿æŸšé‡‘æ±¤åŠ›ç‰¹è°ƒ',price:14.9},
            {name:'å·§å…‹åŠ›ä¼ç‰¹åŠ å†°æ²™',price:14.9}
        ];

        const heavyDrinksItems = [
            {name:'ç¥ç€ç¼å…‰',price:25},
            {name:'é»‘æ¾éœ²é©¬å¤©å°¼',price:25},
            {name:'è‚‰æ¡‚æ³¢æœ¬ç‡ƒ',price:25},
            {name:'çƒŸç†æ¢…å­é…¿',price:25},
            {name:'æ¦›æœç™½å…°åœ°é†‡',price:25}
        ];

        // æ•°æ®å­˜å‚¨å¯¹è±¡
        let userData = {
            personalInfo: {},
            environment: {},
            drinks: [],
            food: [],
            services: [],
            soberSoup: null,
            timestamp: null
        };

        // æ¸²æŸ“å‡½æ•°
        function renderItems(containerId, items) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            items.forEach((item, index) => {
                const div = document.createElement('div');
                div.className='item';
                div.innerHTML= `
                    <input type="checkbox" data-name="${item.name}" data-price="${item.price}" id="${containerId}_item_${index}" />
                    <label for="${containerId}_item_${index}">${item.name} â€” Â¥${item.price}</label>
                `;
                container.appendChild(div);
            });
        }

        // åˆå§‹åŒ–
        window.onload=function() {
            renderItems('milk-tea-list', milkTeaItems);
            renderItems('cold-drinks-list', coldDrinksItems);
            renderItems('mild-intoxication-list', mildDrinksItems);
            renderItems('medium-alcohol-list', mediumDrinksItems);
            renderItems('heavy-alcohol-list', heavyDrinksItems);
            renderItems('crispy-foods', [
                {name:'æ¤’ç›é»‘æ¾éœ²è–¯æ¡',price:28},
                {name:'è’œé¦™é»„æ²¹é¸¡ç¿…',price:36},
                {name:'é¦™è¾£é…¥è„†é±¿é±¼åœˆ',price:32},
                {name:'èŠå£«çˆ†æµ†é¸¡å—',price:30},
                {name:'æ³°å¼é…¸è¾£è™¾ç‰‡',price:22},
                {name:'é¦™ç…åŸ¹æ ¹å·é‡‘é’ˆè‡',price:26},
                {name:'é…¥è„†æ´‹è‘±åœˆ',price:24},
                {name:'å­œç„¶çƒ¤åœŸè±†è§’',price:25},
            ]);
            renderItems('meat-foods', [
                {name:'ç§˜åˆ¶å¤é¸­è„–',price:38},
                {name:'é…±é¦™å¤é¸­èˆŒ',price:42},
                {name:'éº»è¾£å¤é¸¡çˆª',price:35},
                {name:'äº”é¦™å¤æ¯›è±†',price:18},
                {name:'å¤å‘³æ‹¼ç›˜',price:58},
                {name:'é¦™è¾£å¤è‚¥è‚ ',price:45},
                {name:'è’œé¦™å¤èŠ±ç”Ÿ',price:16}
            ]);
            renderItems('seafood-foods', [
                {name:'å†°é•‡é†‰è™¾',price:56},
                {name:'è’œè“‰ç²‰ä¸çƒ¤æ‰‡è´',price:48},
                {name:'é¦™è¾£æŸ æª¬å‡¤èº',price:42},
                {name:'ç›ç„—çš®çš®è™¾',price:68},
                {name:'æ³°å¼é…¸è¾£é’å£è´',price:52},
                {name:'é¦™ç…é»‘è™è™¾',price:55}
            ]);
            renderItems('cheese-starchy', [
                {name:'æ‹‰ä¸èŠå£«ç„—çº¢è–¯',price:26},
                {name:'å¢¨è¥¿å“¥ç‰ç±³è„†ç‰‡',price:30},
                {name:'åŸ¹æ ¹èŠå£«ç„—åœŸè±†æ³¥',price:32},
                {name:'æ„å¼ç•ªèŒ„è‚‰é…±ç„—æ„é¢',price:35},
                {name:'èŠå£«ç„—è˜‘è‡',price:30}
            ]);
            renderItems('cold-refresh', [
                {name:'æ³°å¼é’æœ¨ç“œæ²™æ‹‰',price:28},
                {name:'å‡‰æ‹Œé»„ç“œå·',price:18},
                {name:'æ‰‹æ’•é¸¡ä¸æ‹Œæ´‹è‘±',price:29},
                {name:'é…¸è¾£å¥æ ¹ç²‰',price:20},
                {name:'å‡‰æ‹Œç§‹è‘µ',price:23}
            ]);
            renderItems('creative-snacks', [
                {name:'é»‘æ¾éœ²èŠå£«ç„—å£è˜‘',price:38},
                {name:'çƒŸç†ä¸‰æ–‡é±¼å¡”å¡”',price:62},
                {name:'è¿·ä½ ç‰›è‚‰æ±‰å ¡',price:42},
                {name:'èŸ¹è‚‰é±¼å­é…±æ‰‹æ¡å·',price:55},
                {name:'é¦™è¾£é‡‘æªé±¼ç‰ç±³å¡”',price:32},
                {name:'çƒ¤è‚ æ‹¼ç›˜',price:40},
                {name:'èŠå£«ç„—ç´«è–¯æ³¥',price:28},
                {name:'æ—¥å¼å…³ä¸œç…®',price:36},
                {name:'æŠ¹èŒ¶çº¢è±†å¤§ç¦',price:25}
            ]);
        };

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }

        // é€‰æ‹©é†’é…’æ±¤
        function selectSoberSoup(type) {
            // ç§»é™¤æ‰€æœ‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.soup-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // æ·»åŠ å½“å‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            event.currentTarget.classList.add('selected');
            
            const soupNames = {
                'tomato': 'ç•ªèŒ„æ±',
                'rice': 'ç±³æ±¤',
                'mungbean': 'ç»¿è±†æ±¤'
            };
            
            userData.soberSoup = {
                type: type,
                name: soupNames[type],
                selectedAt: new Date().toLocaleString()
            };
            
            showNotification(`å·²é€‰æ‹©${soupNames[type]}`);
        }

        // é¢„çº¦é†’é…’æ±¤
        function bookCongee() {
            if (!userData.soberSoup) {
                showNotification('è¯·å…ˆé€‰æ‹©ä¸€ç§é†’é…’æ±¤');
                return;
            }
            
            userData.services.push({
                type: 'soberSoup',
                name: userData.soberSoup.name,
                bookedAt: new Date().toLocaleString()
            });
            
            showNotification(`å·²ä¸ºæ‚¨é¢„çº¦${userData.soberSoup.name}`);
        }

        // é€‰æ‹©ç¯å¢ƒ
        function selectEnvironment(type) {
            userData.environment = {
                type: type,
                selectedAt: new Date().toLocaleString()
            };
            
            showEnvironmentDetails(type);
            showNotification(`å·²é€‰æ‹©${getEnvironmentName(type)}ç¯å¢ƒ`);
        }

        // æ˜¾ç¤ºç¯å¢ƒè¯¦æƒ…
        function showEnvironmentDetails(type) {
            const container = document.getElementById('environment-details');
            container.innerHTML='';
            if(type==='heavy') {
                container.innerHTML='<h4>ã€é‡åº¦çƒ­é—¹ç¯å¢ƒã€‘</h4><p>è¹¦è¿ªåŒºåŸŸï¼ŒDJäººå‘˜ï¼šDJå°å¼ºï¼Œæ§åœºäººå‘˜ï¼šé˜¿åº·<br>ç”·å¥³åˆ†åŒºï¼šå¥³æ€§åŒºåŸŸ10åå®‰ä¿ï¼Œç”·æ€§åŒºåŸŸ15åå®‰ä¿ã€‚</p>';
            } else if(type==='moderate') {
                container.innerHTML='<h4>ã€ä¸­åº¦çƒ­é—¹ç¯å¢ƒã€‘</h4><p>é©»å”±ç¯å¢ƒï¼Œæ¬¢è¿è†å¬ï¼š<br>-æ°‘è°£æ­Œå•ï¼ˆæ¯æ—¥æ›´æ–°ï¼ŒèŠ‚å¥æ¬¢å¿«ï¼‰</p>';
            } else if(type==='light') {
                container.innerHTML='<h4>ã€è½»åº¦çƒ­é—¹ç¯å¢ƒã€‘</h4><p>æä¾›çš„å°æ´»åŠ¨ï¼šæ¡Œä¸Šæ¸¸æˆã€æŠ•å½±æ¯”èµ›ã€‚</p>';
            } else if(type==='quiet') {
                container.innerHTML='<h4>ã€æ¸…å§ç¯å¢ƒã€‘</h4><p>ä¸€äººä¸€åº§ï¼Œé—´éš”20cmï¼Œæ¨èæ²™å‘ä¸¤åˆ°ä¸‰äººåŒè¡Œã€‚</p>';
            }
        }

        // è·å–ç¯å¢ƒåç§°
        function getEnvironmentName(type) {
            const names = {
                'heavy': 'é‡åº¦çƒ­é—¹',
                'moderate': 'ä¸­åº¦çƒ­é—¹',
                'light': 'è½»åº¦çƒ­é—¹',
                'quiet': 'æ¸…å§'
            };
            return names[type] || type;
        }

        // æ·»åŠ é€‰ä¸­å•†å“åˆ°è®¢å•
        function addSelectedItems(containerId, category) {
            const checkboxes = document.querySelectorAll(`#${containerId} input[type=checkbox]`);
            checkboxes.forEach(cb => {
                if(cb.checked){
                    const name = cb.dataset.name;
                    const price = parseFloat(cb.dataset.price);
                    
                    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
                    const existingIndex = userData[category].findIndex(item => item.name === name);
                    if (existingIndex === -1) {
                        userData[category].push({name, price, quantity: 1});
                    } else {
                        userData[category][existingIndex].quantity += 1;
                    }
                }
            });
        }

        // æäº¤é¥®å“è®¢å•
        function submitOrder() {
            // æ¸…ç©ºä¹‹å‰çš„é¥®å“é€‰æ‹©
            userData.drinks = [];
            
            // æ·»åŠ å½“å‰å·²å‹¾é€‰çš„å•†å“
            addSelectedItems('milk-tea-list', 'drinks');
            addSelectedItems('cold-drinks-list', 'drinks');
            addSelectedItems('mild-intoxication-list', 'drinks');
            addSelectedItems('medium-alcohol-list', 'drinks');
            addSelectedItems('heavy-alcohol-list', 'drinks');

            let total = 0;
            userData.drinks.forEach(item => total += (item.price * item.quantity));
            
            showNotification(`å·²åŠ å…¥${userData.drinks.length}ç§é¥®å“ï¼Œæ€»ä»·ï¼šÂ¥${total.toFixed(2)}`);
        }

        // æäº¤é£Ÿå“è®¢å•
        function submitFoodOrder() {
            // æ¸…ç©ºä¹‹å‰çš„é£Ÿå“é€‰æ‹©
            userData.food = [];
            
            // æ·»åŠ å½“å‰å·²å‹¾é€‰çš„å•†å“
            addSelectedItems('crispy-foods', 'food');
            addSelectedItems('meat-foods', 'food');
            addSelectedItems('seafood-foods', 'food');
            addSelectedItems('cheese-starchy', 'food');
            addSelectedItems('cold-refresh', 'food');
            addSelectedItems('creative-snacks', 'food');

            let total = 0;
            userData.food.forEach(item => total += (item.price * item.quantity));
            
            showNotification(`å·²åŠ å…¥${userData.food.length}ç§é£Ÿå“ï¼Œæ€»ä»·ï¼šÂ¥${total.toFixed(2)}`);
        }

        // é¢„çº¦ç‰¹æ®ŠæœåŠ¡
        function bookService(type) {
            const serviceNames = {
                'sanitary': 'å¥³æ€§å«ç”Ÿå·¾',
                'changeRoom': 'æ›´æ¢è¡£ç‰©é—´',
                'accommodation': 'ä½å®¿',
                'transport': 'å‡ºè¡ŒæœåŠ¡'
            };
            
            userData.services.push({
                type: type,
                name: serviceNames[type],
                bookedAt: new Date().toLocaleString()
            });
            
            showNotification(`å·²ä¸ºæ‚¨é¢„çº¦${serviceNames[type]}`);
        }

        // æ”¶é›†ä¸ªäººä¿¡æ¯
        function collectPersonalInfo() {
            userData.personalInfo = {
                name: document.getElementById('userName').value,
                gender: document.getElementById('gender').value,
                phone: document.getElementById('phone').value,
                environmentPreference: document.getElementById('environment-type').value,
                alcoholLevel: document.getElementById('alcohol-level').value,
                allergy: document.getElementById('allergy').value,
                purpose: document.getElementById('purpose').value,
                emergencyContacts: {
                    contact1: {
                        name: document.getElementById('emergency1').value,
                        phone: document.getElementById('emergencyPhone1').value
                    },
                    contact2: {
                        name: document.getElementById('emergency2').value,
                        phone: document.getElementById('emergencyPhone2').value
                    }
                },
                changeRoom: document.getElementById('changeRoom').checked,
                accommodation: document.getElementById('accommodation').checked,
                transport: document.getElementById('transport').checked
            };
        }

        // éªŒè¯è¡¨å•
        function validateForm() {
            const requiredFields = [
                {id: 'userName', name: 'å§“å'},
                {id: 'gender', name: 'æ€§åˆ«'},
                {id: 'phone', name: 'æ‰‹æœºå·ç '},
                {id: 'environment-type', name: 'å–œå¥½ç¯å¢ƒ'},
                {id: 'alcohol-level', name: 'é…’ç²¾ç¨‹åº¦'},
                {id: 'allergy', name: 'è¿‡æ•å²'},
                {id: 'purpose', name: 'ç›®çš„'},
                {id: 'emergency1', name: 'ç´§æ€¥è”ç³»äºº1å§“å'},
                {id: 'emergencyPhone1', name: 'ç´§æ€¥è”ç³»äºº1ç”µè¯'}
            ];
            
            for (let field of requiredFields) {
                const element = document.getElementById(field.id);
                if (!element.value.trim()) {
                    showNotification(`è¯·å¡«å†™${field.name}`);
                    element.focus();
                    return false;
                }
            }
            
            // éªŒè¯æ‰‹æœºå·æ ¼å¼
            const phone = document.getElementById('phone').value;
            const phoneRegex = /^1[3-9]\d{9}$/;
            if (!phoneRegex.test(phone)) {
                showNotification('è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·ç ');
                document.getElementById('phone').focus();
                return false;
            }
            
            return true;
        }

        // æœ€ç»ˆæäº¤å…¨éƒ¨ä¿¡æ¯
        function finalSubmit() {
            if (!validateForm()) {
                return;
            }
            
            // æ”¶é›†æ‰€æœ‰æ•°æ®
            collectPersonalInfo();
            userData.timestamp = new Date().toLocaleString();
            
            // æ˜¾ç¤ºæäº¤çš„æ•°æ®
            displaySubmittedData();
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            showNotification('æ‚¨çš„æ‰€æœ‰éœ€æ±‚å·²æäº¤ï¼Œæ„Ÿè°¢æ‚¨çš„é…åˆï¼', 5000);
        }

        // æ˜¾ç¤ºæäº¤çš„æ•°æ®
        function displaySubmittedData() {
            const dataDisplay = document.getElementById('data-display');
            const submittedData = document.getElementById('submitted-data');
            
            // æ ¼å¼åŒ–æ•°æ®ä»¥ä¾¿æ˜¾ç¤º
            const formattedData = JSON.stringify(userData, null, 2);
            submittedData.textContent = formattedData;
            
            dataDisplay.style.display = 'block';
            dataDisplay.scrollIntoView({ behavior: 'smooth' });
        }

        // ä¸‹è½½æ•°æ®
        function downloadData() {
            const dataStr = JSON.stringify(userData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `å¥¹æ–¹é…’å§é¢„çº¦_${new Date().toISOString().slice(0, 10)}.json`;
            link.click();
        }

        // æ¸…é™¤æ•°æ®
        function clearData() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿ')) {
                userData = {
                    personalInfo: {},
                    environment: {},
                    drinks: [],
                    food: [],
                    services: [],
                    soberSoup: null,
                    timestamp: null
                };
                
                // é‡ç½®è¡¨å•
                document.querySelectorAll('input, select').forEach(element => {
                    if (element.type === 'checkbox') {
                        element.checked = false;
                    } else if (element.type !== 'button' && element.type !== 'submit') {
                        element.value = '';
                    }
                });
                
                // é‡ç½®é†’é…’æ±¤é€‰æ‹©
                document.querySelectorAll('.soup-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                document.getElementById('data-display').style.display = 'none';
                showNotification('æ•°æ®å·²æ¸…é™¤');
            }
        }
    </script>
</body>
</html>